---
layout: post
title: k8s
date: 2023-03-27 14:32:00
categories:  å¼€å‘
---

1ä¸ªæœˆæ—¶é—´

# ç®€ä»‹

Kubemetes æ˜¯å¸Œè…Šè¯­ ä¸­çš„ â€œé¢†èˆªå‘˜â€æˆ–â€œèˆµ æ‰‹ â€çš„æ„æ€ 
Kubemetes æŠ½è±¡äº†æ•°æ®ä¸­å¿ƒçš„ç¡¬ä»¶åŸºç¡€è®¾æ–½ï¼Œä½¿å¾—å¯¹å¤–æš´éœ²çš„åªæ˜¯ ä¸€ä¸ªå·¨å¤§çš„ èµ„æºåœ° ã€‚ å®ƒè®©æˆ‘ä»¬åœ¨éƒ¨ç½²å’Œè¿è¡Œç»„ä»¶æ—¶ï¼Œä¸ç”¨å…³æ³¨åº•å±‚çš„æœåŠ¡å™¨ã€‚

æ¥å†
Kubemetesæ˜¯è°·æ­Œ åŸºäºå†…éƒ¨çš„Borgã€ OmegaåŠå…¶ä»–è°·æ­Œå†…éƒ¨ç³»ç»Ÿå®è·µçš„å¼€æºç³»ç»Ÿã€‚

## è¶‹åŠ¿
1. å¤§å‹å•ä½“æœåŠ¡åˆ°æ‹†åˆ†åçš„å¾®æœåŠ¡
2. å‘å¸ƒå‘¨æœŸé•¿-ã€‹å¿«é€Ÿè¿­ä»£
   


## å®¹å™¨åŒ–å¥½å¤„
1. å•ä¸ªå¾®æœåŠ¡è¿›è¡Œæ‰©å®¹
2. æä¾›ä¸€ä¸ªä¸€è‡´çš„ç¯å¢ƒã€‚
3. å¼€å‘è€…æ˜¯éƒ¨ç½²ç¨‹åºæœ¬èº«ï¼Œ ä¸éœ€è¦çŸ¥é“ç¡¬ä»¶åŸºç¡€è®¾æ–½çš„ä»»ä½•æƒ…å†µï¼Œ ä¹Ÿä¸éœ€è¦å’Œè¿ç»´å›¢é˜Ÿäº¤æ¶‰ï¼Œ è¿™è¢«å«ä½œ NoOpsã€‚ å¾ˆæ˜æ˜¾ï¼Œ ä½ ä»ç„¶éœ€è¦æœ‰ä¸€äº›äººæ¥å…³å¿ƒ ç¡¬ä»¶åŸºç¡€è®¾æ–½ï¼Œ ä½† è¿™äº›äººä¸éœ€è¦å†å¤„ç†åº”ç”¨ç¨‹åºçš„ç‹¬ç‰¹æ€§


## K8sé›†ç¾¤æ¶æ„

1. ç”±ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹ç»„æˆ
2. ä¸»èŠ‚ç‚¹ï¼šæ‰¿è½½ç€ Kubernetesæ§åˆ¶å’Œç®¡ç†æ•´ä¸ªé›†ç¾¤ç³»ç»Ÿçš„æ§åˆ¶é¢æ¿ï¼Œå·¥ä½œèŠ‚ç‚¹ï¼šå®ƒä»¬è¿è¡Œç”¨æˆ·å®é™…éƒ¨ç½²çš„åº”ç”¨


### å®‰è£…
å‚çœ‹è¿™ä¸ª é“¾æ¥ https://www.cnblogs.com/tssc/p/15119756.html#_label2_0
curl -Lo minikube https://storage.googleapis.com/minikube/releases/v0.23.0/minikube-darwin-amd64 && chmod +x minikube && sudo mv minikube /usr/local/bin/

ä¸€å®šè¦å®‰è£…v1.7ä»¥ä¸‹çš„k8s ä¸ç„¶ä¹¦ä¸Šçš„ä¾‹å­è·‘æ­¥èµ·æ¥ã€‚
 minikube start --vm-driver=vmware   --image-mirror-country cn --kubernetes-version=v1.16.0

### æ§åˆ¶é¢æ¿
controller
æ§åˆ¶é¢æ¿ç”¨äºæ§åˆ¶é›†ç¾¤å¹¶ä½¿å®ƒå·¥ä½œã€‚å®ƒåŒ…å« å¤šä¸ªç»„ä»¶ï¼Œç»„ä»¶å¯ä»¥è¿è¡Œåœ¨å•ä¸ªä¸» èŠ‚ç‚¹ä¸Šæˆ–è€…é€šè¿‡å‰¯æœ¬åˆ†åˆ«éƒ¨ç½²åœ¨å¤šä¸ªä¸»èŠ‚ç‚¹ ä»¥ç¡®ä¿é«˜å¯ç”¨æ€§ã€‚ è¿™äº›ç»„ä»¶æ˜¯ :
1. Kubernetes API æœåŠ¡å™¨ï¼Œä½ å’Œå…¶ä»–æ§åˆ¶é¢æ¿ç»„ä»¶éƒ½è¦å’Œå®ƒé€šä¿¡
2. Scheculerï¼Œå®ƒ è°ƒåº¦ä½ çš„åº”ç”¨(ä¸ºåº”ç”¨çš„æ¯ä¸ªå¯éƒ¨ç½²ç»„ä»¶åˆ†é…ä¸€ ä¸ªå·¥ä½œèŠ‚ ç‚¹ã€•
3. Controller Managerï¼Œå®ƒæ‰§è¡Œé›†ç¾¤çº§åˆ«çš„åŠŸèƒ½ï¼Œå¦‚å¤åˆ¶ç»„ä»¶ã€æŒç»­è·Ÿè¸ªå·¥ä½œèŠ‚ç‚¹ ã€
å¤„ç†èŠ‚ç‚¹å¤±è´¥ ç­‰
4. etcdï¼Œä¸€ä¸ªå¯é çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ï¼Œå®ƒèƒ½æŒä¹…åŒ–å­˜å‚¨é›†ç¾¤é…ç½® æ§åˆ¶é¢æ¿çš„ç»„ä»¶æŒæœ‰äº•æ§åˆ¶é›†ç¾¤çŠ¶æ€ï¼Œä½†æ˜¯å®ƒä»¬ä¸è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ç”±å·¥ä½œèŠ‚ç‚¹å®Œæˆçš„ ã€‚
### å·¥ä½œèŠ‚ç‚¹
å·¥ä½œèŠ‚ç‚¹æ˜¯è¿è¡Œå®¹å™¨åŒ–åº”ç”¨çš„æœºå™¨ã€‚è¿è¡Œã€ç›‘æ§å’Œ ç®¡ç†åº”ç”¨æœåŠ¡çš„ä»»åŠ¡æ˜¯ç”±ä»¥ ä¸‹ç»„ä»¶å®Œæˆçš„ :
1. Dockerã€rtk :æˆ–è€…å…¶ä»–çš„å®¹å™¨ç±»å‹
2. Kubeletï¼Œå®ƒä¸ API æœåŠ¡å™¨é€šä¿¡ï¼Œå¹¶ç®¡ç†å®ƒ æ‰€åœ¨èŠ‚ç‚¹çš„å®¹å™¨
3. Kubernetes Service Proxy (kubenetes proxy)ï¼Œå®ƒè´Ÿè´£ç»„ä»¶ä¹‹é—´çš„è´Ÿè½½å‡è¡¡ç½‘ç»œæµé‡



# å®‰è£…minikubeè¯•ç”¨
## æ³¨æ„äº‹é¡¹
https://kubernetes.io/zh-cn/docs/tutorials/hello-minikube/

å¿…é¡»è£… 1.17ä»¥ä¸‹çš„k8sæ‰èƒ½ä¸ä¹¦ã€ŠKubernetes in actionã€‹å¯¹é½
```shell
curl -Lo minikube https://storage.googleapis.com/minikube/releases/v1.28.0/minikube-darwin-amd64 && chmod +x minikube && sudo mv minikube /usr/local/bin/

minikube start --vm-driver=vmware  --image-mirror-country cn --kubernetes-version=v1.16.0
```

## å®‰è£…kubectl
```shell
CYA-mbp-3748:k8s yangtingjun$ curl -LO https://dl.k8s.io/release/v1.16.0/bin/darwin/amd64/kubectl
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   138  100   138    0     0    146      0 --:--:-- --:--:-- --:--:--   147
100 50.5M  100 50.5M    0     0  5103k      0  0:00:10  0:00:10 --:--:-- 7190k
CYA-mbp-3748:k8s yangtingjun$ chmod +x kubectl && sudo mv kubectl /usr/local/bin/
```


## åŠ è½½æœ¬åœ°é•œåƒ


**minikubeä½¿ç”¨æœ¬åœ°é•œåƒ**
https://www.cnblogs.com/xiao2/p/16047455.html

```shell
# General
minikube image load <IMAGE_NAME>
# Example
minikube image load pz/demo
```

1. å…ˆæ‰§è¡Œ load æ¥åŠ è½½æœ¬åœ°image ç„¶åå†è¿è¡Œpod

```shell
CYA-mbp-3748:k8s yangtingjun$ minikube image load buptjunjun/kubia
CYA-mbp-3748:k8s yangtingjun$ minikube image ls --format table
|----------------------------------------------------|---------|---------------|--------|
|                       Image                        |   Tag   |   Image ID    |  Size  |
|----------------------------------------------------|---------|---------------|--------|
| docker.io/kubernetesui/metrics-scraper             | <none>  | 115053965e86b | 43.8MB |
| registry.k8s.io/coredns/coredns                    | v1.9.3  | 5185b96f0becf | 48.8MB |
| k8s.gcr.io/pause                                   | 3.6     | 6270bb605e12e | 683kB  |
| registry.aliyuncs.com/google_containers/echoserver | 1.10    | 365ec60129c54 | 95.4MB |
| registry.k8s.io/kube-apiserver                     | v1.25.3 | 0346dbd74bcb9 | 128MB  |
| registry.k8s.io/kube-scheduler                     | v1.25.3 | 6d23ec0e8b87e | 50.6MB |
| registry.k8s.io/kube-controller-manager            | v1.25.3 | 6039992312758 | 117MB  |
| registry.k8s.io/kube-proxy                         | v1.25.3 | beaaf00edd38a | 61.7MB |
| docker.io/kubernetesui/dashboard                   | <none>  | 07655ddf2eebe | 246MB  |
| registry.k8s.io/pause                              | 3.8     | 4873874c08efc | 711kB  |
| registry.k8s.io/etcd                               | 3.5.4-0 | a8a176a5d5d69 | 300MB  |
| gcr.io/k8s-minikube/storage-provisioner            | v5      | 6e38f40d628db | 31.5MB |
| docker.io/buptjunjun/kubia                         | latest  | caf81ecb1de2a | 660MB  |
|----------------------------------------------------|---------|---------------|--------|

```



## è¿è¡Œä¸€ä¸ªpods
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl  run kubia --image=buptjunjun/kubia --port=8080  --generator=run/v1 replicationcontroller "kubia" 
kubectl run --generator=run/v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.
replicationcontroller/kubia created
```


## è·å–podçŠ¶æ€
```shell 
CYA-mbp-3748:k8s yangtingjun$ kubectl get pods
NAME          READY   STATUS    RESTARTS   AGE
kubia-wzfrg   1/1     Running   0          11m
CYA-mbp-3748:k8s yangtingjun$ 
```

## è·å–podè¯¦ç»†ä¿¡æ¯
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl describe pod kubia
Name:         kubia-wzfrg
Namespace:    default
Priority:     0
Node:         minikube/192.168.123.132
Start Time:   Fri, 07 Apr 2023 10:21:12 +0800
Labels:       run=kubia
Annotations:  <none>
Status:       Running
IP:           172.17.0.3
IPs:
  IP:           172.17.0.3
Controlled By:  ReplicationController/kubia
Containers:
  kubia:
    Container ID:  docker://af0f4f7bb3efa00fbab4a8a2e0a5217be72669b0c3331116e5dce54d729276a6
    Image:         buptjunjun/kubia
    Image ID:      docker-pullable://buptjunjun/kubia@sha256:dd9fe26acf20237ce685942a72c289ec8cd9a88e56e74f9b1f728d1bea1b1983
    Port:          8080/TCP
    Host Port:     0/TCP
    Args:
      replicationcontroller
      kubia
    State:          Running
      Started:      Fri, 07 Apr 2023 10:22:36 +0800
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-tx94q (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  default-token-tx94q:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-tx94q
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s
                 node.kubernetes.io/unreachable:NoExecute for 300s
Events:
  Type    Reason     Age        From               Message
  ----    ------     ----       ----               -------
  Normal  Scheduled  <unknown>  default-scheduler  Successfully assigned default/kubia-wzfrg to minikube
  Normal  Pulling    11m        kubelet, minikube  Pulling image "buptjunjun/kubia"
  Normal  Pulled     10m        kubelet, minikube  Successfully pulled image "buptjunjun/kubia"
  Normal  Created    10m        kubelet, minikube  Created container kubia
  Normal  Started    10m        kubelet, minikube  Started container kubia

```

## è®¿é—®å†…éƒ¨çš„pod

podåªèƒ½å†…éƒ¨è®¿é—®ï¼Œåˆ›å»ºä¸€ä¸ªLoadbalancer å¯ä»¥å¤–éƒ¨è®¿é—®

```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl expose rc kubia --type=LoadBalancer --name kubia-http 
service/kubia-http exposed

CYA-mbp-3748:k8s yangtingjun$ kubectl get services
NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1        <none>        443/TCP          41m
kubia-http   LoadBalancer   10.110.247.198   <pending>     8080:30709/TCP   4m21s
CYA-mbp-3748:k8s yangtingjun$ 

```
æ³¨æ„ä¸Šé¢çš„  EXTERNAL-IP   æ˜¯pending éœ€è¦ä¸€å®šæ—¶é—´æ‰æœ‰ã€‚**ä½†æ˜¯minikube**ä¸€ç›´åœ¨pending æœ‰é—®é¢˜ã€‚
è§£å†³åŠæ³•å¦‚ä¸‹ ï¼ˆ minikube tunnelï¼‰
```shell
CYA-mbp-3748:k8s yangtingjun$  minikube tunnel
Password:
Status:	
	machine: minikube
	pid: 38111
	route: 10.96.0.0/12 -> 192.168.123.132
	minikube: Running
	services: [kubia-http]
    errors: 
		minikube: no errors
		router: no errors
		loadbalancer emulator: no errors


```
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl get services
NAME         TYPE           CLUSTER-IP       EXTERNAL-IP      PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1        <none>           443/TCP          73m
kubia-http   LoadBalancer   10.110.247.198   10.110.247.198   8080:30709/TCP   36m
CYA-mbp-3748:k8s yangtingjun$ 

```



## æ°´å¹³ä¼¸ç¼©
æŸ¥çœ‹å½“å‰çš„æœŸæœ›å‰¯æœ¬æ•°(DESIRED)å’Œå®é™…å‰¯æœ¬æ•°(CURRENT)
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl get replicationcontrollers
NAME    DESIRED   CURRENT   READY   AGE
kubia   1         1         1       29m
```

å¢åŠ å‰¯æœ¬æ•°åˆ°3
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl scale rc kubia --replicas=3
replicationcontroller/kubia scaled
CYA-mbp-3748:k8s yangtingjun$ kubectl get replicationcontrollers
NAME    DESIRED   CURRENT   READY   AGE
kubia   3         3         1       30m
CYA-mbp-3748:k8s yangtingjun$ 
CYA-mbp-3748:k8s yangtingjun$ kubectl get replicationcontrollers
NAME    DESIRED   CURRENT   READY   AGE
kubia   3         3         3       31m
```

æŸ¥çœ‹æ‰€æœ‰pods
```
CYA-mbp-3748:k8s yangtingjun$ kubectl get pods
NAME          READY   STATUS    RESTARTS   AGE
kubia-9d8w2   1/1     Running   0          3m36s
kubia-brv2b   1/1     Running   0          3m36s
kubia-wzfrg   1/1     Running   0          34m
CYA-mbp-3748:k8s yangtingjun$ 
```
è·å–æ‰€æœ‰æœåŠ¡åˆ—è¡¨

```shell
CYA-mbp-3748:k8s yangtingjun$ minikube service list
|----------------------|---------------------------|--------------|------------------------------|
|      NAMESPACE       |           NAME            | TARGET PORT  |             URL              |
|----------------------|---------------------------|--------------|------------------------------|
| default              | kubernetes                | No node port |
| default              | kubia-http                |         8080 | http://192.168.123.132:30709 |
| kube-system          | kube-dns                  | No node port |
| kubernetes-dashboard | dashboard-metrics-scraper | No node port |
| kubernetes-dashboard | kubernetes-dashboard      | No node port |
|----------------------|---------------------------|--------------|------------------------------|

```

1. åˆ é™¤minikube 
   https://gist.github.com/rahulkumar-aws/65e6fbe16cc71012cef997957a1530a3
   


# POD 
## ä»€ä¹ˆäº‹POD
1. Kubemetes é›†ç¾¤ä¸­çš„æ‰€æœ‰ pod éƒ½åœ¨åŒä¸€ä¸ªå…±äº«ç½‘ç»œåœ°å€ç©ºé—´ä¸­ã€‚
2. PODä¸­å¯ä»¥éƒ¨ç½²å¤šä¸ªcontainer
3. æ€ä¹ˆå†³å®šè¦ä¸è¦åœ¨PODä¸­éƒ¨ç½²å¤šä¸ªcontainer
  å®ƒä»¬éœ€è¦ ä¸€èµ·è¿è¡Œè¿˜æ˜¯å¯ä»¥åœ¨ä¸åŒçš„ä¸»æœºä¸Šè¿è¡Œ?
  å®ƒä»¬ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ•´ä½“è¿˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ç»„ä»¶?
  å®ƒä»¬å¿…é¡»ä¸€èµ·è¿›è¡Œæ‰©ç¼©å®¹è¿˜æ˜¯å¯ ä»¥åˆ†åˆ«è¿›è¡Œ?


## æŸ¥çœ‹PODçš„é…ç½®
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl get po kubia-9d8w2  -o yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: "2023-04-07T02:51:54Z"
  generateName: kubia-
  labels:
    run: kubia
  name: kubia-9d8w2
  namespace: default
  ownerReferences:
  - apiVersion: v1
    blockOwnerDeletion: true
    controller: true
    kind: ReplicationController
    name: kubia
    uid: 0b4dde74-1c83-4909-81fd-4f91db323cb4
  resourceVersion: "2810"
  selfLink: /api/v1/namespaces/default/pods/kubia-9d8w2
  uid: 7cf81a5a-69d5-4008-a4b7-e2056a796250
spec:
  containers:
  - args:
    - replicationcontroller
    - kubia
    image: buptjunjun/kubia
    imagePullPolicy: Always
    name: kubia
    ports:
    - containerPort: 8080
      protocol: TCP
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: default-token-tx94q
      readOnly: true
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  nodeName: minikube
  priority: 0
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: {}
  serviceAccount: default
  serviceAccountName: default
  terminationGracePeriodSeconds: 30
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: 300
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: 300
  volumes:
  - name: default-token-tx94q
    secret:
      defaultMode: 420
      secretName: default-token-tx94q
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: "2023-04-07T02:51:54Z"
    status: "True"
    type: Initialized
  - lastProbeTime: null
    lastTransitionTime: "2023-04-07T02:52:36Z"
    status: "True"
    type: Ready
  - lastProbeTime: null
    lastTransitionTime: "2023-04-07T02:52:36Z"
    status: "True"
    type: ContainersReady
  - lastProbeTime: null
    lastTransitionTime: "2023-04-07T02:51:54Z"
    status: "True"
    type: PodScheduled
  containerStatuses:
  - containerID: docker://7c22a2ec08eb77b6ea534b9210c459839ab8a0323049b0873bf82f7f0e9af6ce
    image: buptjunjun/kubia:latest
    imageID: docker-pullable://buptjunjun/kubia@sha256:dd9fe26acf20237ce685942a72c289ec8cd9a88e56e74f9b1f728d1bea1b1983
    lastState: {}
    name: kubia
    ready: true
    restartCount: 0
    started: true
    state:
      running:
        startedAt: "2023-04-07T02:52:35Z"
  hostIP: 192.168.123.132
  phase: Running
  podIP: 172.17.0.6
  podIPs:
  - ip: 172.17.0.6
  qosClass: BestEffort
  startTime: "2023-04-07T02:51:54Z"
CYA-mbp-3748:k8s yangtingjun$ 

```



## é€šè¿‡æ–‡ä»¶åˆ›å»ºpod
æ–‡ä»¶kubia-mannual.yaml
```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: kubia-mannual

spec:
  containers:
    - image: buptjunjun/kubia
      name: kubia
      ports:
        - containerPort: 8080
          protocol: TCP
```

```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl create -f kubia-manual.yaml 
pod/kubia-mannual created
CYA-mbp-3748:c2 yangtingjun$ kubectl get pods
NAME            READY   STATUS    RESTARTS   AGE
kubia-9d8w2     1/1     Running   0          161m
kubia-brv2b     1/1     Running   0          161m
kubia-mannual   1/1     Running   0          85s
kubia-wzfrg     1/1     Running   0          3h12m
```

æŸ¥çœ‹podè¿è¡Œæ—¥å¿—:
```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl logs kubia-mannual
Kubia server starting ...
```

-cæŒ‡å®šå®¹å™¨
```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl logs kubia-mannual -c kubia
Kubia server starting ...
CYA-mbp-3748:c2 yangtingjun$ 
```


## é€šè¿‡ç«¯å£è½¬å‘å‘æŒ‡å®špodå‘é€è¯·æ±‚ã€‚
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl port-forward kubia-mannual 11000:8080
Forwarding from 127.0.0.1:11000 -> 8080
Forwarding from [::1]:11000 -> 8080
```
è®¿é—®
```shell
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ curl "localhost:11000"
 you have hit kubia-mannual
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ 
```
ä½¿ç”¨ç«¯å£è½¬å‘å¯ä»¥ç”¨æ¥æµ‹è¯•ç‰¹å®šçš„pod

## ä½¿ç”¨æ ‡ç­¾ç»„ç»‡pod
æ·»åŠ  **kubia-manual-v2.yaml**
```
apiVersion: v1
kind: Pod
metadata: 
  name: kubia-mannual-v2
# åŠ å…¥æ ‡ç­¾  
  labels: 
    creation_method: mannual
    env: prod

spec:
  containers:
    - image: buptjunjun/kubia
      name: kubia
      ports:
        - containerPort: 8080
          protocol: TCP
```

```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl create -f kubia-manual-v2.yaml 
pod/kubia-mannual-v2 created
CYA-mbp-3748:c2 yangtingjun$ kubectl get po --show-labels
NAME               READY   STATUS              RESTARTS   AGE     LABELS
kubia-9d8w2        1/1     Running             0          179m    run=kubia
kubia-brv2b        1/1     Running             0          179m    run=kubia
kubia-mannual      1/1     Running             0          19m     <none>
kubia-mannual-v2   0/1     ContainerCreating   0          15s     creation_method=mannual,env=prod
kubia-wzfrg        1/1     Running             0          3h30m   run=kubia
CYA-mbp-3748:c2 yangtingjun$ 
```
## ä¿®æ”¹podçš„leabel

```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl label po kubia-mannual-v2 env=debug --overwrite
pod/kubia-mannual-v2 labeled
CYA-mbp-3748:c2 yangtingjun$ kubectl get po --show-labels
NAME               READY   STATUS    RESTARTS   AGE     LABELS
kubia-9d8w2        1/1     Running   0          3h5m    run=kubia
kubia-brv2b        1/1     Running   0          3h5m    run=kubia
kubia-mannual      1/1     Running   0          25m     <none>
kubia-mannual-v2   1/1     Running   0          5m54s   creation_method=mannual,env=debug
kubia-wzfrg        1/1     Running   0          3h36m   run=kubia
CYA-mbp-3748:c2 yangtingjun$ 
```


## ç”¨æ ‡ç­¾æ¥è¿‡æ»¤
```shell

CYA-mbp-3748:quietlistener.github.io yangtingjun$ kubectl get po -l creation_method=mannual
NAME               READY   STATUS    RESTARTS   AGE
kubia-mannual-v2   1/1     Running   0          7m16s
CYA-mbp-3748:quietlistener.github.io yangtingjun$ kubectl get po -l env
NAME               READY   STATUS    RESTARTS   AGE
kubia-mannual-v2   1/1     Running   0          7m26s
CYA-mbp-3748:quietlistener.github.io yangtingjun$ kubectl get po -l creation_method!=mannual
NAME            READY   STATUS    RESTARTS   AGE
kubia-9d8w2     1/1     Running   0          3h8m
kubia-brv2b     1/1     Running   0          3h8m
kubia-mannual   1/1     Running   0          28m
kubia-wzfrg     1/1     Running   0          3h39m
CYA-mbp-3748:quietlistener.github.io yangtingjun$ 
```



## å°†podè°ƒåº¦åˆ°æŒ‡å®šçš„node

çœ‹çœ‹æœ‰çš„node
```shell
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ kubectl get nodes --show-labels
NAME       STATUS   ROLES    AGE     VERSION   LABELS
minikube   Ready    master   4h10m   v1.16.0   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube,kubernetes.io/os=linux,minikube.k8s.io/commit=986b1ebd987211ed16f8cc10aed7d2c42fc8392f,minikube.k8s.io/name=minikube,minikube.k8s.io/primary=true,minikube.k8s.io/updated_at=2023_04_07T09_58_36_0700,minikube.k8s.io/version=v1.28.0,node-role.kubernetes.io/master=
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ 

```
minikubeè¿™ä¸ªèŠ‚ç‚¹æ‰“ä¸Šgpu=trueçš„æ ‡ç­¾
```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl label node minikube  gpu=rue
node/minikube labeled
CYA-mbp-3748:c2 yangtingjun$ kubectl get node  --show-labels
NAME       STATUS   ROLES    AGE     VERSION   LABELS
minikube   Ready    master   4h13m   v1.16.0   beta.kubernetes.io/arch=amd64,beta.kubernetes.io/os=linux,gpu=rue,kubernetes.io/arch=amd64,kubernetes.io/hostname=minikube,kubernetes.io/os=linux,minikube.k8s.io/commit=986b1ebd987211ed16f8cc10aed7d2c42fc8392f,minikube.k8s.io/name=minikube,minikube.k8s.io/primary=true,minikube.k8s.io/updated_at=2023_04_07T09_58_36_0700,minikube.k8s.io/version=v1.28.0,node-role.kubernetes.io/master=
CYA-mbp-3748:quietlistener.github.io yangtingjun$ kubectl get nodes -L gpu=true
NAME       STATUS   ROLES    AGE     VERSION   GPU=TRUE
minikube   Ready    master   4h14m   v1.16.0   
CYA-mbp-3748:quietlistener.github.io yangtingjun$ 
```

æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶
kubia-gpu.yaml
```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: kubia-gpu
# åŠ å…¥æ ‡ç­¾  
  labels: 
    creation_method: mannual
    env: prod

spec:
#èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚kuberneteså°†podéƒ¨ç½²åˆ°åŒ…å«gpu=trueçš„èŠ‚ç‚¹
  nodeSelector:  
    gpu: "true"
  containers:
    - image: buptjunjun/kubia
      name: kubia
      ports:
        - containerPort: 8080
          protocol: TCP
```

åˆ›å»ºnodeå¹¶ï¼Œä¼šè¢«è°ƒåº¦åˆ°gpu=trueçš„èŠ‚ç‚¹

```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl create -f kubia-manual-gpu.yaml 
pod/kubia-gpu created
CYA-mbp-3748:c2 yangtingjun$ kubectl get po --show-labels
NAME               READY   STATUS    RESTARTS   AGE     LABELS
kubia-9d8w2        1/1     Running   0          3h28m   run=kubia
kubia-brv2b        1/1     Running   0          3h28m   run=kubia
kubia-gpu          1/1     Running   0          30s     creation_method=mannual,env=prod
kubia-mannual      1/1     Running   0          48m     <none>
kubia-mannual-v2   1/1     Running   0          29m     creation_method=mannual,env=debug
kubia-wzfrg        1/1     Running   0          3h59m   run=kubia
CYA-mbp-3748:c2 yangtingjun$ 
```

## å‘½åç©ºé—´namespace
1. ä¸€ä¸ªpodå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œä½†æ˜¯ä¸€ä¸ªpodåªèƒ½å±äºä¸€ä¸ªå‘½åç©ºé—´ï¼Œæ‰€ä»¥å‘½åç©ºé—´å¯ä»¥å°†podåˆ†å‰²æˆä¸é‡å¤çš„åŸŸä¸­ã€‚
2. èµ„æºåœ¨å‘½åç©ºé—´ä¸­ä¿æŒå”¯ä¸€ï¼Œåœ¨ä¸åŒå‘½åç©ºé—´å¯ä»¥é‡å¤ã€‚

### å‘½åç©ºé—´ç›¸å…³æ“ä½œ 
åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´
```shell
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ kubectl get ns
NAME                   STATUS   AGE
default                Active   4h32m
kube-node-lease        Active   4h32m
kube-public            Active   4h32m
kube-system            Active   4h32m
kubernetes-dashboard   Active   4h8m
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ 
```

åˆ—å‡ºæŒ‡å®šå‘½åç©ºé—´çš„pod
```shell
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ kubectl get po --namespace=kube-system
NAME                               READY   STATUS    RESTARTS   AGE
coredns-67c766df46-x9cm4           1/1     Running   0          4h33m
etcd-minikube                      1/1     Running   0          4h32m
kube-apiserver-minikube            1/1     Running   0          4h32m
kube-controller-manager-minikube   1/1     Running   0          4h33m
kube-proxy-pch9n                   1/1     Running   0          4h33m
kube-scheduler-minikube            1/1     Running   0          4h32m
storage-provisioner                1/1     Running   1          4h33m
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ 
```



### åˆ›å»ºnamespace
```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl create -f  namespace-create-custom.yaml 
namespace/custom-namespace created
CYA-mbp-3748:c2 yangtingjun$ 
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ kubectl get ns
NAME                   STATUS   AGE
custom-namespace       Active   38s
default                Active   4h39m
kube-node-lease        Active   4h39m
kube-public            Active   4h39m
kube-system            Active   4h39m
kubernetes-dashboard   Active   4h14m
CYA-mbp-3748:apache-jmeter-5.4.3 yangtingjun$ 
```

åœ¨podé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šnamespace
```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: kubia-mannual
  #æŒ‡å®šnamespace
  namespace: custom-namespace 

spec:
  containers:
    - image: buptjunjun/kubia
      name: kubia
      ports:
        - containerPort: 8080
          protocol: TCP
```

åˆ›å»ºpod
```shell
CYA-mbp-3748:c2 yangtingjun$ kubectl create -f  kubia-manual-with-namespce.yaml 
pod/kubia-mannual created
CYA-mbp-3748:c2 yangtingjun$ kubectl get po --namespace=custom-namespace
NAME            READY   STATUS    RESTARTS   AGE
kubia-mannual   1/1     Running   0          69s
CYA-mbp-3748:c2 yangtingjun$ 
```
**ç°åœ¨æœ‰ä¸¤ä¸ªnameä¸ºkubia-mannualçš„podä¸€ä¸ªåœ¨defaultç©ºé—´ä¸€ä¸ªåœ¨custom-namespaceç©ºé—´**


## åˆ é™¤/åœæ­¢pod
å¯ä»¥æŒ‰påå­—ã€æ ‡ç­¾ã€namespaceæ¥åˆ é™¤(åœæ­¢)pod





# å‰¯æœ¬æœºåˆ¶å’Œå…¶ä»–æ§åˆ¶å™¨

## podå¥åº·
### podä¿æ´» æ¢é’ˆ
Kubemetes å¯ ä»¥é€šè¿‡å­˜æ´»æ¢é’ˆ (liveness probe) æ£€æŸ¥å®¹å™¨æ˜¯å¦è¿˜åœ¨è¿è¡Œã€‚ å¯ä»¥ ä¸º pod ä¸­çš„æ¯ä¸ªå®¹å™¨å•ç‹¬æŒ‡å®šå­˜æ´»æ¢é’ˆã€‚ å¦‚æœæ¢æµ‹å¤±è´¥ï¼Œ Kubemetes å°†å®šæœŸæ‰§è¡Œæ¢ é’ˆå¹¶é‡æ–°å¯åŠ¨å®¹å™¨ã€‚
### ä¸‰ç§æ¢é’ˆ
#### HTTPæ¢é’ˆ

```yaml
apiVersion: v1
kind: Pod
metadata: 
  name: kubia-liveness-probe

spec:
  containers:
    - image: buptjunjun/kubia-unhealth
      name: kubia
      ports:
        - containerPort: 8080
          protocol: TCP
      livenessProbe:   #å­˜æ´»æ¢é’ˆ
        httpGet:
          path: /
          port: 8080     
        initialDelaySeconds: 15 #15ç§’åæ‰å‘èµ·æ¢æµ‹
```


## RplicationController ReplicaSets DeamonSets

## Job åˆ›å»ºä¸€æ¬¡æ€§ä»»åŠ¡


# æœåŠ¡ service
   1.  åˆ›å»ºæœåŠ¡ï¼Œå®ƒçš„ipåœ°å€æ˜¯ä¸å˜çš„ï¼Œ
   2.  é€šè¿‡ç©¿ä»¶æœåŠ¡èƒ½è®©å‰ç«¯çš„podé€šè¿‡ç¯å¢ƒå˜é‡æˆ–è€…dnsæˆ–è€…æœåŠ¡åæ¥è®¿é—®åç«¯æœåŠ¡ã€‚

```shell
CYA-mbp-3748:k8s yangtingjun$ minikube service list
|----------------------|---------------------------|--------------|------------------------------|
|      NAMESPACE       |           NAME            | TARGET PORT  |             URL              |
|----------------------|---------------------------|--------------|------------------------------|
| default              | kubernetes                | No node port |
| default              | kubia-http                |         8080 | http://192.168.123.132:30709 |
| kube-system          | kube-dns                  | No node port |
| kubernetes-dashboard | dashboard-metrics-scraper | No node port |
| kubernetes-dashboard | kubernetes-dashboard      | No node port |
|----------------------|---------------------------|--------------|------------------------------|
CYA-mbp-3748:k8s yangtingjun$ kubectl get svc
NAME         TYPE           CLUSTER-IP       EXTERNAL-IP      PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1        <none>           443/TCP          7d4h
kubia-http   LoadBalancer   10.110.247.198   10.110.247.198   8080:30709/TCP   7d3h
CYA-mbp-3748:k8s yangtingjun$ kubectl get pods
NAME               READY   STATUS    RESTARTS   AGE
kubia-9d8w2        1/1     Running   1          7d3h
kubia-brv2b        1/1     Running   1          7d3h
kubia-gpu          1/1     Running   1          7d
kubia-mannual      1/1     Running   1          7d
kubia-mannual-v2   1/1     Running   1          7d
kubia-wzfrg        1/1     Running   1          7d4h
CYA-mbp-3748:k8s yangtingjun$ kubectl exec kubia-9d8w2 -- curl -s http://10.110.247.198:8080
 you have hit kubia-wzfrg
CYA-mbp-3748:k8s yangtingjun$ 
```


æŸ¥çœ‹ç¯å¢ƒå˜é‡
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl exec kubia-9d8w2 --  env
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=kubia-9d8w2
KUBERNETES_SERVICE_PORT_HTTPS=443
KUBERNETES_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_PORT=443
KUBERNETES_PORT=tcp://10.96.0.1:443
KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1
KUBIA_HTTP_PORT=tcp://10.110.247.198:8080
KUBIA_HTTP_PORT_8080_TCP_ADDR=10.110.247.198
KUBIA_HTTP_SERVICE_PORT=8080
KUBIA_HTTP_PORT_8080_TCP=tcp://10.110.247.198:8080
KUBIA_HTTP_PORT_8080_TCP_PROTO=tcp
KUBERNETES_SERVICE_HOST=10.96.0.1
KUBERNETES_SERVICE_PORT=443
KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443
KUBIA_HTTP_SERVICE_HOST=10.110.247.198
KUBIA_HTTP_PORT_8080_TCP_PORT=8080
NPM_CONFIG_LOGLEVEL=info
NODE_VERSION=7.10.1
YARN_VERSION=0.24.4
HOME=/root
```

å…¶ä¸­ KUBIA_HTTP_SERVICE_HOST=10.110.247.198 å’Œ KUBIA_HTTP_SERVICE_PORT=8080 è¡¨ç¤ºkubia-httpçš„çš„ipåœ°å€å’Œç«¯å£

é€šè¿‡dnsè®¿é—®
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl  exec -it kubia-9d8w2
root@kubia-9d8w2:/# curl http://kubia-http:8080                             
 you have hit kubia-wzfrg
root@kubia-9d8w2:/# curl http://kubia-http.default:8080
 you have hit kubia-brv2b
root@kubia-9d8w2:/# curl http://kubia-http.default:8080
```


## endpoint
æœåŠ¡å¹¶ä¸æ˜¯ç›´æ¥å’Œåç«¯çš„podç›¸è¿ï¼Œæœ‰Endpointä»‹äºäºŒè€…ä¹‹é—´ã€‚
ä¸‹é¢å¯ä»¥çœ‹åˆ° kubia-httpæœ‰Endpointï¼Œé€šè¿‡selectoræ¥åˆ›å»ºçš„ã€‚

```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl describe svc kubia-http
Name:                     kubia-http
Namespace:                default
Labels:                   run=kubia
Annotations:              <none>
Selector:                 run=kubia
Type:                     LoadBalancer
IP:                       10.110.247.198
LoadBalancer Ingress:     10.110.247.198
Port:                     <unset>  8080/TCP
TargetPort:               8080/TCP
NodePort:                 <unset>  30709/TCP
Endpoints:                172.17.0.10:8080,172.17.0.5:8080,172.17.0.7:8080
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>
CYA-mbp-3748:k8s yangtingjun$ 
```

endpointå°±æ˜¯æš´éœ²ä¸€ä¸ªæœåŠ¡çš„ipåœ°å€å’Œç«¯å£åˆ—è¡¨ã€‚
é€‰æ‹©å™¨ Selectorç”¨äºIPå’Œç«¯å£åˆ—è¡¨ç„¶åå­˜å‚¨åœ¨Endpointèµ„æºä¸­ã€‚å½“å®¢æˆ·ç«¯é“¾æ¥åˆ°æœåŠ¡æ—¶å€™ï¼ŒæœåŠ¡ä»£ç†æ‚¬ç€è¿™äº›ipå’Œç«¯å£ä¸­çš„ä¸€ä¸ªï¼Œå¹¶å°†ä¼ å…¥é“¾æ¥é‡å®šå‘åœ¨æ”¹ä½ç½®ç›‘å¬çš„æœåŠ¡å™¨ã€‚
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl get endpoints
NAME         ENDPOINTS                                          AGE
kubernetes   192.168.123.132:8443                               7d5h
kubia-http   172.17.0.10:8080,172.17.0.5:8080,172.17.0.7:8080   7d4h

```

## ä¿æœåŠ¡æš´éœ²ç»™å¤–éƒ¨æœåŠ¡ã€‚
### ä½¿ç”¨NodePort
å°†ä¸€ç»„podå…¬å¼€ç»™å¤–éƒ¨å®¢æˆ·ç«¯ï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡ å¹¶å°†å…¶ç±»å‹è®¾ç½®ä¸ºNodePortï¼ŒNodePortæœåŠ¡å¯ä»¥åœ¨å…¶æ‰€æœ‰èŠ‚ç‚¹ä¸Šä¿ç•™ä¸€ä¸ªç«¯å£ï¼Œå¹¶å°†ä¼ å…¥çš„é“¾æ¥è½¬å‘ç»™ä½œä¸ºæœåŠ¡éƒ¨åˆ†çš„podã€‚


## Ingress
åªéœ€è¦æš´éœ²ä¸€ä¸ªå…¬ç½‘ipå°±å¯ä»¥é€šè¿‡ä¸»æœºåå’Œè·¯å¾„æ¥è½¬å‘åˆ°çš„æœåŠ¡ã€‚æœ‰ç‚¹åƒnginx

æŸ¥çœ‹å’Œå¯åŠ¨ingress
```shell
CYA-mbp-3748:k8s yangtingjun$ minikube addons list
|-----------------------------|----------|--------------|--------------------------------|
|         ADDON NAME          | PROFILE  |    STATUS    |           MAINTAINER           |
|-----------------------------|----------|--------------|--------------------------------|
| ambassador                  | minikube | disabled     | 3rd party (Ambassador)         |
| auto-pause                  | minikube | disabled     | Google                         |
| cloud-spanner               | minikube | disabled     | Google                         |
| csi-hostpath-driver         | minikube | disabled     | Kubernetes                     |
| dashboard                   | minikube | enabled âœ…   | Kubernetes                     |
| default-storageclass        | minikube | enabled âœ…   | Kubernetes                     |
| efk                         | minikube | disabled     | 3rd party (Elastic)            |
| freshpod                    | minikube | disabled     | Google                         |
| gcp-auth                    | minikube | disabled     | Google                         |
| gvisor                      | minikube | disabled     | Google                         |
| headlamp                    | minikube | disabled     | 3rd party (kinvolk.io)         |
| helm-tiller                 | minikube | disabled     | 3rd party (Helm)               |
| inaccel                     | minikube | disabled     | 3rd party (InAccel             |
|                             |          |              | [info@inaccel.com])            |
| ingress                     | minikube | disabled     | Kubernetes                     |
| ingress-dns                 | minikube | disabled     | Google                         |
| istio                       | minikube | disabled     | 3rd party (Istio)              |
| istio-provisioner           | minikube | disabled     | 3rd party (Istio)              |
| kong                        | minikube | disabled     | 3rd party (Kong HQ)            |
| kubevirt                    | minikube | disabled     | 3rd party (KubeVirt)           |
| logviewer                   | minikube | disabled     | 3rd party (unknown)            |
| metallb                     | minikube | disabled     | 3rd party (MetalLB)            |
| metrics-server              | minikube | disabled     | Kubernetes                     |
| nvidia-driver-installer     | minikube | disabled     | Google                         |
| nvidia-gpu-device-plugin    | minikube | disabled     | 3rd party (Nvidia)             |
| olm                         | minikube | disabled     | 3rd party (Operator Framework) |
| pod-security-policy         | minikube | disabled     | 3rd party (unknown)            |
| portainer                   | minikube | disabled     | 3rd party (Portainer.io)       |
| registry                    | minikube | disabled     | Google                         |
| registry-aliases            | minikube | disabled     | 3rd party (unknown)            |
| registry-creds              | minikube | disabled     | 3rd party (UPMC Enterprises)   |
| storage-provisioner         | minikube | enabled âœ…   | Google                         |
| storage-provisioner-gluster | minikube | disabled     | 3rd party (Gluster)            |
| volumesnapshots             | minikube | disabled     | Kubernetes                     |
|-----------------------------|----------|--------------|--------------------------------|
CYA-mbp-3748:k8s yangtingjun$ minikube addons enable ingress
ğŸ’¡  ingress is an addon maintained by Kubernetes. For any concerns contact minikube on GitHub.
You can view the list of minikube maintainers at: https://github.com/kubernetes/minikube/blob/master/OWNERS
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v0.49.3
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.5.1
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.5.1
ğŸ”  Verifying ingress addon...
ğŸŒŸ  å¯åŠ¨ 'ingress' æ’ä»¶
CYA-mbp-3748:k8s yangtingjun$ 
```


æŸ¥çœ‹ä¸€ä¸‹ingressæœåŠ¡æ˜¯nginxå®ç°çš„ã€‚
```shell
CYA-mbp-3748:k8s yangtingjun$ kubectl get po --all-namespaces
NAMESPACE              NAME                                         READY   STATUS      RESTARTS   AGE
custom-namespace       kubia-mannual                                1/1     Running     1          7d1h
default                kubia-9d8w2                                  1/1     Running     1          7d5h
default                kubia-brv2b                                  1/1     Running     1          7d5h
default                kubia-wzfrg                                  1/1     Running     1          7d6h
ingress-nginx          ingress-nginx-admission-create-w2n68         0/1     Completed   0          3m34s
ingress-nginx          ingress-nginx-admission-patch-6hmqz          0/1     Completed   0          3m34s
ingress-nginx          ingress-nginx-controller-964545c5f-bdhwn     1/1     Running     0          3m34s
kube-system            coredns-67c766df46-x9cm4                     1/1     Running     1          7d6h
kube-system            etcd-minikube                                1/1     Running     1          7d6h
kube-system            kube-apiserver-minikube                      1/1     Running     1          7d6h
kube-system            kube-controller-manager-minikube             1/1     Running     2          7d6h
kube-system            kube-proxy-pch9n                             1/1     Running     1          7d6h
kube-system            kube-scheduler-minikube                      1/1     Running     1          7d6h
kube-system            storage-provisioner                          1/1     Running     7          7d6h
kubernetes-dashboard   dashboard-metrics-scraper-7fb9859764-wtf5d   1/1     Running     1          7d6h
kubernetes-dashboard   kubernetes-dashboard-59d54d6bc8-4l757        1/1     Running     2          7d6h
CYA-mbp-3748:k8s yangtingjun$ 

```